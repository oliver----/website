<!DOCTYPE html><html><head>
    <title>
  Learn : Stencila
</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    

    <link rel="stylesheet" href="/css/materia.min.css">
    <link rel="stylesheet" href="/css/docsearch.min.css">
    <link rel="stylesheet" href="/css/website.css">
    
<style type="text/css">
  main .content {
    min-height: 60vh;
  }

  main .menu {
    padding-top: 4em;
    padding-left: 2em;
  }

  main .steps {
    margin-top: 2em;
  }

  main .prev,
  main .next {
    font-size: 1.2em;
  }

  main .prev {
    float: left;
  }

  main .next {
    float: right;
  }
</style>
<link rel="stylesheet" href="/css/prism.css">

  </head>
  <body>
    <header class="header">
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="/"><img src="/img/logo-name.png" alt="Stencila"></a>
        <div class="navbar-burger"><span></span><span></span><span></span></div>
      </div>
      <div class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="/use">Use</a>
          <a class="navbar-item" href="/learn/getting-started/intro.html">Learn</a>
          <a class="navbar-item" href="/contribute">Contribute</a>
        </div>
        <div class="navbar-end">
          <!--
          Search temporarily disabled. See issue #2
          <div class="navbar-item">
            <div class="field">
              <p class="control">
                <input id="search" class="input" type="search" placeholder="Search">
              </p>
            </div>
          </div>
          -->
          <a class="navbar-item" href="/community">Community</a>
          <a class="navbar-item" href="/blog">Blog</a>
        </div>
      </div>
    </div>
  </nav>
</header>

    
<main class="section">
  <div class="container">
    <div class="columns">
      <div class="column">
        <div class="content">
          <h1 id="r">R</h1>
<p>You can write the contents of Stencila cells in R as well as make your existing R functions available in Stencila through <a href="computation/functions.md#domain-specific-libraries">function libraries</a>. An execution context for R, <code>RContext</code>. Currrently, in order to have <code>RContext</code> available, you need to have an R sesssion running either locally or point to a session running in a remote location.</p>
<h2 id="data-interchange">Data interchange</h2>
<h2 id="cells">Cells</h2>
<p>With Stencila you have full control over the sequence in which your code cells are executed. You can run the code in asynchronous order.
You can refer to specific outputs from the given cell in any part of your Stencila document.
Stencila does all this using its <a href="computation/engine.md">execution engine</a>.</p>
<p>The engine manages automatic dependencies between the cells which are specific for each language. For cells written in
R it is farily simple.  If you want to capture the output of the cell,
create a variable and assign (<code>&lt;-</code>) the output.
Note that the variables in Stencila are non-mutable &#x2728; . Whatever is on the right hand of the assignment (<code>&lt;-</code>)
will become the cell input.</p>
<p>You can the refer to this cell&apos;s input and output in the Stencila document.</p>
<p>If you do not capture the output explicitly, you will not be able to refer to it later on. But the input of the cell
will still be available.</p>
<p>For example:</p>
<pre><code class="language-r">x &lt;- 4
sqrt(x)
</code></pre>
<p>The input for this cell is <code>x</code>, the output is empty (<code>null</code>) and the value is 2 (<code>sqrt(4)</code>).</p>
<p>If you want to caputure the output and be able to refer back to it in the future you need to
modify the cell as follows:</p>
<pre><code class="language-r">x &lt;- 4
y &lt;- sqrt(x)
</code></pre>
<p>The output is now <code>y</code> and you can refer back to this variable in any other cell in Stencila.</p>
<h2 id="functions">Functions</h2>
<p>You can make almost any R functions for data manipulation available from within Stencila by using our API (which is a simple wrapper). You can either contribute new functions to the Stencila Core Library, existing domain-specific libraries or create a new domain-specific library and add your functions there.</p>
<h3 id="implement">Implement</h3>
<p>Create the R function implementation in a <code>.R</code> file in the <code>R</code> folder e.g. <code>R/sum.R</code> for the <code>sum</code> function.</p>
<h3 id="test">Test</h3>
<p>To test your function implementation, create a new test file in the <code>tests/testthat</code> folder e.g. <code>tests/testthat/test_sum.R</code> for the <code>sum</code> function.</p>
<p>Install some useful R packages for package development and testing, if you don&apos;t already have them,</p>
<pre><code class="language-r">install.packages(c(&apos;devtools&apos;, &apos;roxygen2&apos;, &apos;lintr&apos;, &apos;testthat&apos;, &apos;covr&apos;))
</code></pre>
<p>Check for lint,</p>
<pre><code class="language-bash">lintr::lint_package()
</code></pre>
<p>Then run all the tests,</p>
<pre><code class="language-bash">devtools::test()
</code></pre>
<p>Alternatively, you can run the tests and calculate test coverage using,</p>
<pre><code class="language-bash">covr::package_coverage()
</code></pre>
<h3 id="register-sparkles">Register &#x2728;</h3>
<p>Once you finished implementing and testing your R function, you need to register it to make it available from within Stencila. You can do it either through RStudio
or via Stencila Sheets.</p>
<p>See the demo below how to register functions from RStudio.</p>
<p><img src="img/registering-functions.gif" alt="Registering R Functions with Stencila Spreadsheet"></p>
<p>In order to do
that select <code>Register function</code> from the menu and point to the main directory (for example, <code>libgenomics</code>) where the <code>.py</code> file with the function is located. Stencila will automatically
create the documentation from the docstring. You can then use the function within Stencila.</p>
<p>If you want to make the function available for someone else using Stencila on a different machine, select <code>Create function package</code>, then point
to the man directory with function file. Once the function package is created, select where you want to save it. You can then share the package (which
essentially is a <code>zip</code> file). If the main directory with the function exists as a GitHub or BitBucket repository (see <a href="https://github.com/stencila/libtemplate">these guidelines</a>),
then you can simply point users to the repository.</p>
<p>To register the function from the package, use the <code>Register function</code> option from the menu, as described above. If you are registering from a GitHub or BitBucket repository,
just copy and paste the link to it.</p>

        </div>
        <div class="steps">
          
          
        </div>
      </div>
      <div class="column is-one-quarter">
        <aside class="menu">
  <p class="menu-label">
    Getting started
  </p>
  <ul class="menu-list">
    <li><a href="/learn/getting-started/intro.html">Introduction</a></li>
    <li><a href="/learn/getting-started/installation.html">Installation</a></li>
    <!-- <li><a href="/learn/getting-started/quick-start.html">Quick start</a></li> -->
    <!-- <li><a href="/learn/getting-started/faq.html">FAQ</a></li> -->
  </ul>
  <!-- <p class="menu-label">
    Computation
  </p> -->
  <ul class="menu-list">
    <!-- <li><a href="/learn/computation/data.html">Data</a></li> -->
    <!-- <li><a href="/learn/computation/operations.html">Operations</a></li> -->
    <!-- <li><a href="/learn/computation/contexts.html">Contexts</a></li> -->
    <!-- <li><a href="/learn/computation/engine.html">Engine</a></li> -->
    <!-- <li><a href="/learn/computation/functions.html">Functions</a></li> -->
  </ul>
  <!-- <p class="menu-label">
    Languages
  </p> -->
  <ul class="menu-list">
    <!-- <li><a href="/learn/languages/mini.html">Mini</a></li> -->
    <!-- <li><a href="/learn/languages/javascript.html">Javascript</a></li> -->
    <!-- <li><a href="/learn/languages/python.html">Python</a></li> -->
    <!-- <li><a href="/learn/languages/r.html">R</a></li> -->
    <!-- <li><a href="/learn/languages/sql.html">SQL</a></li> -->
  </ul>
</aside>

      </div>
    </div>
  </div>
</main>

    <footer class="footer">
  <div class="container">
    <div class="columns">
      <div class="column">
        <h4 class="title is-6 has-text-grey-light"> About </h4>
        <a href="/use">Use </a> <br>
        <a href="/learn"> Learn </a> <br>
        <a href=""> FAQ  </a>  <br>
      </div>
      <div class="column">
        <h4 class="title is-6 has-text-grey-light"> Community </h4>
        <a href="/contribute"> Contribute </a> <br>
        <a href="/community/beta-testing.html"> Beta Testing </a> <br>
        <a href="/community/resources.html"> Resources  </a>  <br>
        <a href="/blog"> Blog  </a>  <br>
      </div>
      <div class="column">
        <h4 class="title is-6 has-text-grey-light"> Contact </h4>
        <a href="mailto:hello@stenci.la">Email </a> <br>
        <a href="https://twitter.com/stencila"> Twitter </a> <br>
        <a href="https://gitter.im/stencila/stencila"> Gitter  </a>  <br>
        <a href="https://community.stenci.la/"> Forum  </a>  <br>
        <a id="edit-page" class="button" href="https://github.com/stencila/website/edit/master/src/learn/languages/r.md" target="_blank" title="Edit this page">&#x270E; Edit</a>
      </div>
    </div>
    <div class="columns">
      <div class="column has-text-grey-light has-text-centered">
          &#xA9; 2018 Stencila <a href="https://github.com/stencila/website/graphs/contributors">contributors</a>
      </div>
   </div>
  </div>
</footer>

  
  

  <script type="text/javascript" src="/js/docsearch.min.js"></script>
  <script type="text/javascript" src="/js/website.js"></script>
  
<script type="text/javascript" src="/js/prism.js"></script>
<script type="text/javascript" src="/js/prism-bash.min.js"></script>
<script type="text/javascript" src="/js/prism-json.min.js"></script>
<script type="text/javascript" src="/js/prism-mini.js"></script>
<script type="text/javascript" src="/js/prism-python.min.js"></script>
<script type="text/javascript" src="/js/prism-r.min.js"></script>
<script type="text/javascript" src="/js/prism-sql.min.js"></script>


</body></html>